# !/usr/bin/env python
# -*- coding: utf-8 -*-
import importlib
import os
import pkgutil
import public

os.environ["DJANGO_SETTINGS_MODULE"] = os.getenv("TASK_SETTINGS_MODULE",os.getenv("TASK_SETTINGS_MODULE","task.settings"))


@public.add
def getmodules():
    """return a list of `task_*` module objects"""
    modules = []
    for finder, name, ispkg in pkgutil.iter_modules():
        if name.startswith('task_'):
            module = importlib.import_module(name)
            modules.append(module)
    return modules
